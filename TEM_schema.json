{
   "$schema":"https://json-schema.org/draft/2019-09/schema",
   "$id":"https://mdmc.kit.edu/schemas/tem_metadata",
   "type":"object",
   "description":"The purpose of this JSON Schema is to provide description of a transmission electron microscopy (TEM) measurement. The cardinality of all properties are either defined as required or optional and wherever possible a list of controlled vocabularies is provided. Also each property is labelled to indicate if it is automatically extractable (AE) or not automatically extractable (NAE). Note that some of the items which are of the type - object might have some properties which are AE and some others which are NAE, so the overall automatic extractability of these objects would be given as NAE. The automatic extractability of the individual properties of dimensional quantities are, on the contrary, is not always possible to be labelled in the definition, as these are repeated in multiple instances, with each instance having its own automatic extractability",
   "properties":{
      "entry":{
         "$ref":"#/$defs/entry"
      }
   },
   "required":[
      "entry"
   ],
   "title":"tem",
   "$defs":{
      "entry":{
         "type":"object",
         "description":"The entry level contains all the metadata describing a single measurement. The design of the schema is modular: in case of multiple measurements, an entry for each measurement can be included. It is the root element of the schema. Properties: entryID (required, NAE)- Identifier of the measurement usually provided by the project or the laboratory, title (required, AE)- Extended title of the measurement of datatype string, startTime (optional, NAE)- Start time of the measurement in the format CCYY-MM-DDThh:mm:ss.sss, endTime (required, AE)- End time of the measurement in the format CCYY-MM-DDThh:mm:ss.sss, definition (optional, NAE)- Name of the schema to which this entry conforms of datatype string, program (optional, AE)- details concerning the program (or software) used for aquisition, defined separately as programDetails, revision (optional, NAE)- details concerning any revision to the xml document due to e.g. re-calibration, reprocessing, new analysis, new instrument definition format defined separately as revisionDetails, user (required, NAE)- the contact information of the user responsible for the measurement defined separately as userDetails, sample (required, NAE)- details concerning the sample defined separately as sampleDetails, instrument (required, NAE)- details concerning the instrument settings defined separately as instrumentDetails.",
         "additionalProperties":false,
         "properties":{
            "entryID":{
               "$ref":"#/$defs/identifier"
            },
            "title":{
               "type":"string"
            },
            "startTime":{
               "type":"string",
               "format":"date-time"
            },
            "endTime":{
               "type":"string",
               "format":"date-time"
            },
            "definition":{
               "type":"string"
            },
            "program":{
               "$ref":"#/$defs/program"
            },
            "revision":{
               "$ref":"#/$defs/revision"
            },
            "user":{
               "$ref":"#/$defs/user"
            },
            "sample":{
               "$ref":"#/$defs/sample"
            },
            "instrument":{
               "$ref":"#/$defs/instrumentDetails"
            }
         },
         "required":[
            "title",
            "endTime",
            "definition",
            "user",
            "sample",
            "instrument"
         ],
         "title":"entry"
      },
      "identifier":{
         "type":"object",
         "description":"Details of an identifier element. Properties: identifierValue (optional, NAE) - a string containing the value of an identifier, identifierType (optional, NAE) - type of the identifier to be chosen from a controlled list of values -*ROR *GRID *ISNI *URL *DOI *Handle",
         "additionalProperties":false,
         "properties":{
            "identifierValue":{
               "type":"string"
            },
            "identifierType":{
               "type":"string",
               "enum":[
                  "ROR",
                  "GRID",
                  "ISNI",
                  "URL",
                  "DOI",
                  "Handle"
               ]
            }
         }
      },
      "program":{
         "type":"object",
         "description":"Details concerning the program (or software) used for aquisition. Properties: programName (optional, AE) - Name of the program (or software) used for acquisition of datatype string, programVersion (optional, AE)- Program (or software) version number of datatype string",
         "additionalProperties":false,
         "properties":{
            "programName":{
               "type":"string"
            },
            "programVersion":{
               "type":"string"
            }
         },
         "title":"program"
      },
      "revision":{
         "type":"object",
         "additionalProperties":false,
         "description":"details concerning any revision to the xml document due to e.g. re-calibration, reprocessing, new analysis, new instrument definition format. Properties: revisionID (optional, NAE) - Identifier of the file, revisionComment (optional, NAE)- any comments to the revision of the datatype string",
         "properties":{
            "revisonID":{
               "$ref":"#/$defs/identifier"
            },
            "revisionComment":{
               "type":"string"
            }
         },
         "title":"revision"
      },
      "user":{
         "type":"object",
         "additionalProperties":false,
         "description":"Lists the contact information of the user responsible for the measurement. Properties: userName (required, NAE) - the full name of the user preferrably written in the order (familyName, givenName) defined to be of the datatype string, givenName (optional, NAE)-Given name (first name) of the user, familyName (optional, NAE) - Family name or last name of the user, role (optional, NAE) - Role of the user to be selected from an enumerated list - *Data Curator *Instrument Scientist *Principal Investigator *Project Member *Research User *Site Leader *Work Package Leader, affiliation (optional, NAE) - Details of the institution to which the user is affiliated, email (optional, NAE) - Email of the userof datatype string (only valid email-ids are acceptable), ORCID (optional, NAE) - Open Researcher and Contributor ID expressed as a URI",
         "properties":{
           "userName":{
              "type":"string"
           },
            "givenName":{
               "type":"string"
            },
            "familyName":{
               "type":"string"
            },
            "role":{
               "type":"string",
               "enum":[
                  "Data Curator",
                  "instrument Scientist",
                  "Principal Investigator",
                  "Project Member",
                  "Research user",
                  "Site Leaderr",
                  "Work Package Leader"
               ]
            },
            "affiliation":{
               "$ref":"#/$defs/institutionDetails"
            },
            "email":{
               "type":"string",
               "format":"email"
            },
            "ORCID":{
               "type":"string",
               "pattern":"^https://orcid\\.org/[0-9]{4}-[0-9]{4}-[0-9]{4}-[0-9]{3}[X0-9]{1}$"
            }
         },
         "required":[
            "userName",
            "role"
         ],
         "title":"user"
      },
      "institutionDetails":{
         "type":"object",
         "additionalProperties":false,
         "description":"Details of the institution to which the user is affiliated. Properties: institutionName (optional, NAE) - The full name of an institution of datatype string, institutionAcronym (optional, NAE) - The acronym of the institution. Note that authors often cite with acronyms, so this information can be important in matching a query of datatype string, institutionDepartment (optional, NAE)- The department within an institution of datatype string, institutionIdentifier (optional, NAE) - Identifier pertaining to the institution",
         "properties":{
            "institutionName":{
               "type":"string"
            },
            "institutionAcronym":{
               "type":"string"
            },
            "institutionDepartment":{
               "type":"string"
            },
            "institutionID":{
               "$ref":"#/$defs/identifier"
            }
         }
      },
      "sample":{
         "type":"object",
         "additionalProperties":false,
         "description":"details concerning the sample: properties- sampleName (required, AE) - Name of the sample of the datatype string, sampleID (optional, NAE) - Identifier for the sample, conductive (required, NAE) - Indicates whether the sample  is conductive of datatype boolean, magnetic (required, NAE) - Indicates whether the sample is magnetic of datatype boolean, eBeamSensitive (required, NAE) - Indicates whether the sample is not stable under electron beam of datatype boolean, eBeamSensitivity (optional, NAE) - Details about the type of sensitivity to the electron beam defined separately as eBeamSensitivityDetails (includes radiolysis, knockON, optimizedVoltage, comment and  beamContaminated), iBeamSensitive (optional, NAE) - Indicates whether the sample is not stable under ion beam of datatype boolean, iBeamSensitivity (optional, NAE) - Details about the type of sensitivity to the ion beam defined separately as iBeamSensitivityDetails (includes GaSensitive, HeSensitive and other), embeddingMaterial (required, NAE) - Supporting medium in which the specimen is embedded (e.g., none, demotec 30, 70, Epoxy) of datatype string with default value set as none, sampleForm (optional, NAE) - Description of the sample form (e.g., bulk, nanostructured, powder, pellet) of datatype string, sampleSize (optional, NAE) - Size of the sample defined separately as distanceDetails (includes value, optional uncertainty, optional qualifier, optional notes and a controlled list of units for length - nm, µm, mm, cm, m), sampleThickness (optional, NAE) - Thickness of the sample defined separately as distanceDetails (includes the value, optional uncertainty, optional qualifier, optional notes and a controlled list of units for length - nm, µm, mm, cm, m), sampleHolder (optional, NAE) - Description of the sample holder used defined separately as sampleHolderDetails (includes holderType, washer1, washer2, clamper and fixingMethod), finalSpecimen (optional, NAE) - Description of type of final specimen to be made in case of in-situ TEM structures of type string, plasmaCleaning (optional, NAE) - Details about plasma cleaning performed to prepare the specimen defined separately as plasmaCleaningDetails (includes gasComposition, power, percentPower and duration), storageConditions (optional, NAE) - Environment conditions in which the sample has to be stored before and after the measurement (e.g., gas atmosphere, humidity, temperature and pressure etc) of datatype string, measurementConditions (optional, NAE) - Conditions to be maintained during the measurement inside the machine (e.g., water vapor, cryogenic temperature, gas atmosphere) of datatype string, samplePreparation (optional, NAE) - Details about the sample preparation defined separately as samplePrepType (includes details like date of preparation, description of preparation and preparationID) of datatype string",
         "properties":{
            "sampleName":{
               "type":"string"
            },
            "sampleID":{
               "$ref":"#/$defs/identifier"
            },
            "conductive":{
               "type":"boolean"
            },
            "magnetic":{
               "type":"boolean"
            },
            "eBeamSensitive":{
               "type":"boolean"
            },
            "eBeamSensitivity":{
               "$ref":"#/$defs/eBeamSensitivityDetails"
            },
            "iBeamSensitive":{
               "type":"boolean"
            },
            "iBeamSensitivity":{
               "$ref":"#/$defs/iBeamSensitivityDetails"
            },
            "embeddingMaterial":{
               "type":"string",
               "default":"none"
            },
            "sampleForm":{
               "type":"string"
            },
            "sampleSize":{
               "$ref":"#/$defs/distanceDetails"
            },
            "sampleThickness":{
               "$ref":"#/$defs/distanceDetails"
            },
            "sampleHolder":{
               "$ref":"#/$defs/sampleHolderDetails"
            },
            "finalSpecimen":{
               "type":"string"
            },
            "plasmaCleaning":{
               "$ref":"#/$defs/plasmaCleaningDetails"
            },
            "storageConditions":{
               "type":"string"
            },
            "measurementConditions":{
               "type":"string"
            },
            "samplePreparation":{
               "$ref":"#/$defs/samplePrepType"
            }
         },
         "required":[
            "conductive",
            "eBeamSensitive",
            "magnetic",
            "sampleName"
         ],
         "title":"sample"
      },
      "distanceDetails":{
         "type":"object",
         "description":"describes a distance, size or length. Properties: value (required) - The distance, size or length expressed as an integer or floating point value of datatype number, unit (required) - the unit of the value to be selected from a controlled list (nm, µm, mm, cm, m, default value - mm) of datatype string, qualifier (optional, NAE) - A qualifier to describe the value (e.g., avg, max, min, default value - max) of datatype string, uncertainty (optional, NAE) - Uncertainty in the value defined separately as uncertaintyDetails,(allows choosing between an absolute uncertainty or relative uncertainty and entering the value of uncertainty as a number), notes (optional, NAE) - Further notes about the value of datatype string",
         "additionalProperties":false,
         "properties":{
            "value":{
               "type":"number"
            },
            "unit":{
               "type":"string",
               "enum":[
                  "nm",
                  "µm",
                  "mm",
                  "cm",
                  "m"
               ]
            },
            "qualifier":{
               "type":"string",
               "default":"max",
               "enum":[
                 "max",
                 "min",
                 "average"
                 ]
            },
            "uncertainty":{
               "$ref":"#/$defs/uncertaintyDetails"
            },
            "notes":{
               "type":"string"
            }
         },
         "required":[
            "value",
            "unit"
         ],
         "title":"distanceDetails"
      },
      "uncertaintyDetails":{
         "type":"object",
         "description":"describes an uncertainty. Properties: type (required, NAE) - type of the uncertainty to be chosen between absolute or relative of datatype string, value (required, NAE) -  value of the uncertainty expressed as a number",
         "additionalProperties":false,
         "properties":{
            "uncertaintyType":{
               "type":"string",
               "enum":[
                  "absolute",
                  "relative"
               ]
            },
            "value":{
               "type":"number"
            }
         },
         "required":[
            "value",
            "unit"
         ],
         "title":"uncertaintyDetails"
      },
      "eBeamSensitivityDetails":{
        "type":"object",
        "description":"describes the details concerning the type of sensitivity to the electron beam. Properties: radiolysis (optional, NAE) - to be set as true if the material undergoes radiolysis upon interaction with the electron beam (of the datatype boolean), knockON (optional, NAE) - to be set as true if the material undergoes knockON upon interaction with the electron beam (of the datatype boolean), optimizedIncidentEnergy (optional, NAE) - The optimized incident energy of electrons selected to reduce effect of the e-beam on the sample usually expressed in keV (defined separately as energyDetails), comment (optional, NAE) - To include any relevant details about the e-beam contamination of the sample of the datatype string, beamContaminated (optional, NAE) - to be set as true is the sample is already contaminated by the e-beam of the datatype boolean",
        "additionalProperties":false,
        "properties":{
          "radiolysis":{
            "type":"boolean",
            "default": false
          },
          "knockON":{
            "type":"boolean",
            "default": false
          },
          "optimizedIncidentEnergy":{
            "$ref":"#/$defs/energyDetails"
          },
          "comment":{
            "type":"string"
          },
          "beamContaminated":{
            "type":"boolean",
            "default":false
          }
        },
        "title":"eBeamSensitivityDetails"
      },
      "iBeamSensitivityDetails":{
        "type":"object",
        "description":"describes the details concerning the type of sensitivity to the ion beam. Properties: GaSensitive (optional, NAE) - to be set as true if the material is sensitive to Ga ions (of the datatype boolean), HeSensitive (optional, NAE) - to be set as true if the material is sensitive to He ions (of the datatype boolean), other (optional, NAE) - option to include any other type of ions other than Ga or He (of the datatype string)",
        "properties":{
          "GaSensitive":{
            "type":"boolean",
            "default":false
          },
          "HeSensitive":{
            "type":"boolean",
            "default":false
          },
          "other":{
            "type":"string"
          }
        },
        "title":"iBeamSensitivityDetails"
      },
      "sampleHolderDetails":{
        "type":"object",
        "description":"Details about the sample holder and its componenets and the way in which the sample is mounted onto the sample holder. Properties: holderType (optional, NAE) - Description about the TEM grid or sample holder (of the datatype string), washer1 (optional, NAE) - material of an additional frame used for supporting/ protecting TEM lamella or a TEM sample holder (of the datatype string), washer2 (optional, NAE) - material of an additional washer if used (of the datatype string), clamper (optional, NAE) - material of the clamper (of the datatype string), fixingMethod (optional, NAE) - description about adhesive used to bond/weld specimen to grid, adhere multiple samples for TEM cross-sections, pre-coat samples prior to encapsulation and for other mounting application (of the datatype string)",
        "properties":{
          "holderType":{
            "type":"string"
          },
          "washer1":{
            "type":"string"
          },
          "washer2":{
            "type":"string"
          },
          "clamper":{
            "type":"string"
          },
          "fixingMethod":{
            "type":"string"
          }
        },
        "title":"sampleHolderDetails"
      },
      "plasmaCleaningDetails":{
        "type":"object",
        "description":"describes the details of the plasma cleaning procedure if performed. Properties: gasComposition (optional, NAE) - Description of the composition of gases used for plasma cleaning (of the datatype string), power (optional, NAE) - power used for plasma cleaning defined separately as powerDetails, percentPower (optional, NAE) - percentage (out of 100) of the total power of the plasma cleaning device used (of the datatype number), duration (optional, NAE) - duration of time (in seconds) for which plasma cleaning is performed (defined separately as timeDetails)",
        "properties":{
          "gasComposition":{
            "type":"string"
          },
          "power":{
            "$ref":"#/$defs/powerDetails"
          },
          "percentPower":{
            "type":"number"
          },
          "duration":{
            "$ref":"#/$defs/timeDetails"
          }
        },
        "title":"plasmaCleaningDetails"
      },
      "powerDetails":{
        "type":"object",
        "description":"describes a power. Properties: value (required, NAE) - The power expressed as an integer or floating point value of datatype number, unit (required, NAE) - the unit of the value to be selected from a controlled list (mW, W, kW, default value - W) of datatype string, qualifier (optional, NAE) - A qualifier to describe the value (e.g., avg, max, min, default value - max) of datatype string, uncertainty (optional, NAE) - Uncertainty in the value defined separately as uncertaintyDetails,(allows choosing between an absolute uncertainty or relative uncertainty and entering the value of uncertainty as a number), notes (optional, NAE) - Further notes about the value of datatype string",
        "additionalProperties":false,
        "properties":{
           "value":{
              "type":"number"
           },
           "unit":{
              "type":"string",
              "default":"W",
              "enum":[
                 "mW",
                 "W",
                 "kW"
              ]
           },
           "qualifier":{
              "type":"string",
              "default":"max",
              "enum":[
                "max",
                "min",
                "average"
                ]
           },
           "uncertainty":{
              "$ref":"#/$defs/uncertaintyDetails"
           },
           "notes":{
              "type":"string"
           }
        },
        "required":[
           "value",
           "unit"
        ],
        "title":"powerDetails"
      },
      "samplePrepType":{
         "type":"object",
         "description":"describes the sample preparation process. Properties: preparationDate (optional, NAE) - Date of preparation in the form CCYY-MM-DD, preparationDescription (optional, NAE) -Short description of the preparation of datatype string, preparationID (optional, NAE) - Identifier for the sample preparation",
         "additionalProperties":false,
         "properties":{
            "preparationDate":{
               "type":"string",
               "format":"date"
            },
            "preparationDescription":{
               "type":"string"
            },
            "preparationID":{
               "$ref":"#/$defs/identifier"
            }
         },
         "title":"samplePrepType"
      },
      "instrumentDetails":{
         "type":"object",
         "additionalProperties":false,
         "description":"details giving the relevant instrument settings and the collection of the components of the instrument. Properties: instrumentName (required, AE) - Name of the instrument of datatype string, instrumentID (optional, NAE) - Identifier for the instrument, instrumentManufacturer (optional, AE) - details like manufacturer name, model name and manufacturer ID, grouped together and defined separately as manufacturerDetails, precession (optional, AE) - Details about precession like the angle and frequency of precession (defined separately as precessionDetails), additionalAttachments (optional, NAE) - A string to include any additional attachment(s), setMagnification (required, AE) - The magnification set for the diffraction pattern or image (of the datatype number), actualMagnification (optional, AE) - The actual magnification observed which might differ from the set magnification (of the datatype number), driftCorrectionApplied (optional, AE) - To bet set as true if  drift correction is applied to compensate for xy drift (of the datatype boolean), setCameraLength (required, AE) - the effective distance or magnification between the specimen and the detector plane defined separately as distanceDetails, actualCameraLength (optional, AE) - The actual camera length as opposed to the set camera length defined separately as distanceDetails, operationMode (required, AE) - to select the operation mode between TEM or STEM (of the datatype string), objectiveLensMode (optional, NAE) - to select the objective lens mode used from a controlled list (of the datatype string), illuminationMode (optional, NAE) - to select the illumination mode used from a controlled list (of the datatype string), probeMode (optional, AE) - to select the type of probe mode used (nano probe mode or micro probe mode; of the datatype string), imageMode (required, NAE) - to select the image mode out of a controlled list of strings consisiting of * normal image * Selected Area Diffraction (SAD) * Energy-Dispersive X-Ray Spectroscopy (EDXS) * Scanning Transmission Electron Microscopy (STEM) * Nano-Beam Diffraction (NBD) * Convergent Beam Electron Diffraction (CBED), fieldMode (optional, AE) - to select between dark field and bright field modes (of the datatype string), spotSize (required, NAE) - Spotsize (diameter) of the beam or a parameter (integer) indicating the spread of the beam entering the aperture such that a lower number means more electrons are hitting the sample (alternatively it is the size of the first spot formed by the beam after being emitteed from the gun) defined separately as spotSizeDetails ; it is the size of the first spot formed by the beam after being emitted from the gun, defocus (required, AE) - Value indicating how far the sample is away from the focus of the electron beam defined separately as distanceDetails, probeSize (optional, NAE) - Size of the beam at the sample defined separately as distanceDetails, chamberPressure (required, AE) - pressure maintained inside the chamber (in which the sample is housed) during the measurement defined separately as pressureDetails, monochromator (optional, AE) - details pertaining to the monochromator expressed separately as monochromatorDetails, source (required, NAE) - details pertaining to the source of the electron beam expressed separately as sourceDetails, stage (required, AE) - details pertaining to the stage expressed separately as stageDetails, aperture (optional, AE) - details pertaining to the apertures used expressed separately as apertureDetails, lens (required, AE) - details pertaining to the lenses used expressed separately as lensDetails, ASTAR (optional, AE) - details about an ASTAR attachment used with the microscope for orientation-phase imaging defined separately as ASTARdetails, EFTEM (optional, AE) -  Details about Energy Filtered TEM (EFTEM) Mode defined separately as EFTEMdetails, detector (required, NAE) - details pertaining to the detector used expressed separately as detectorDetails",
         "properties":{
            "instrumentName":{
               "type":"string"
            },
            "instrumentID":{
               "$ref":"#/$defs/identifier"
            },
            "instrumentManufacturer":{
               "$ref":"#/$defs/manufacturerDetails"
            },
            "precession":{
               "$ref":"#/$defs/precessionDetails"
            },
            "additionalAttachments":{
               "type":"string"
            },
            "setMagnification":{
               "type":"number"
            },
            "actualMagnification":{
               "type":"number"
            },
            "driftCorrectionApplied":{
               "type":"boolean",
               "default":false
            },
            "setCameraLength":{
               "$ref":"#/$defs/distanceDetails"
            },
            "actualCameraLength":{
               "$ref":"#/$defs/distanceDetails"
            },
            "operationMode":{
               "type":"string",
               "enum":[
                 "TEM",
                 "STEM"
               ]
            },
            "objectiveLensMode":{
               "type":"string",
               "enum":[
                 "HM",
                 "normal"
               ]
            },
            "illuminationMode":{
               "type":"string",
               "enum":[
                 "probe",
                 "parallel"
               ]
            },
            "probeMode":{
               "type":"string",
               "enum":[
                 "micro probe mode",
                 "nano probe mode"
               ]
            },
            "imageMode":{
               "type":"string",
               "enum":[
                 "normal image",
                 "SAD",
                 "EDS",
                 "NBD",
                 "CBED"
               ]
            },
            "fieldMode":{
               "type":"string",
               "enum":[
                 "dark field",
                 "bright field"
               ]
            },
            "spotSize":{
               "$ref":"#/$defs/distanceDetails"
            },
            "defocus":{
               "$ref":"#/$defs/distanceDetails"
            },
            "probeSize":{
               "$ref":"#/$defs/distanceDetails"
            },
            "chamberPressure":{
               "$ref":"#/$defs/pressureDetails"
            },
            "monochromator":{
               "$ref":"#/$defs/monochromatorDetails"
            },
            "source":{
               "$ref":"#/$defs/sourceDetails"
            },
            "stage":{
               "$ref":"#/$defs/stageDetails"
            },
            "aperture":{
               "$ref":"#/$defs/apertureDetails"
            },
            "lens":{
               "$ref":"#/$defs/lensDetails"
            },
            "ASTAR":{
               "$ref":"#/$defs/ASTARdetails"
            },
            "detector":{
               "$ref":"#/$defs/detectorDetails"
            }
         },
         "required":[
            "instrumentName",
            "setMagnification",
            "setCameraLength",
            "operationMode",
            "spotSize",
            "defocus",
            "chamberPressure",
            "source",
            "stage",
            "aperture",
            "lens",
            "detector"
         ],
         "title":"instrument"
      },
      "manufacturerDetails":{
         "type":"object",
         "description":"gives details like the name of the manufacturer and model of the instrument and an ID. Properties: manufacturerName (optional, AE) - Name of the manufacturer of datatype string, modelName (optional, AE) - Model of the instrument of datatype string, manufacturerID (optional, NAE) - Identifier for the manufacturer",
         "additionalProperties":false,
         "properties":{
            "manufacturerName":{
               "type":"string"
            },
            "modelName":{
               "type":"string"
            },
            "manufacturerID":{
               "$ref":"#/$defs/identifier"
            }
         },
         "title":"manufacturerDetails"
      },
      "precessionDetails":{
         "type":"object",
         "description":"gives details about the precession. Properties: precessionAngle (optional, NAE) - Angle of the precession defined separately as angleDetails, precessionFrequency (optional, NAE) - Frequency of the precession defined separately as frequencyDetails",
         "additionalProperties":false,
         "properties":{
            "precessionAngle":{
              "$ref":"#/$defs/angleDetails"
            },
            "precessionFrequency":{
              "$ref":"#/$defs/frequencyDetails"
            }
         },
         "title":"precessionDetails"
      },
      "frequencyDetails":{
         "type":"object",
         "description":"describes a frequency. Properties: value (required, AE) - The frequency expressed as an integer or floating point value of datatype number, unit (required, AE) - the unit of the value to be selected from a controlled list (Hz, kHz, default value - Hz) of datatype string, qualifier (optional, NAE) - A qualifier to describe the value (e.g., avg, max, min), default value - max) of datatype string, uncertainty (optional, NAE) - Uncertainty in the value defined separately as uncertaintyDetails, which gives the option of choosing between an absolute uncertainty or relative uncertainty and entering the value of uncertainty as a number, notes (optional, NAE) - Further notes about the value of datatype string",
         "additionalProperties":false,
         "properties":{
            "value":{
               "type":"number"
            },
            "unit":{
               "type":"string",
               "default":"Pa",
               "enum":[
                  "Hz",
                  "kHz"
               ]
            },
            "qualifier":{
               "type":"string",
               "default":"max",
               "enum":[
                 "max",
                 "min",
                 "average"
                 ]
            },
            "uncertainty":{
               "$ref":"#/$defs/uncertaintyDetails"
            },
            "notes":{
               "type":"string"
            }
         },
         "required":[
            "unit",
            "value"
         ],
         "title":"pressureDetails"
      },
      "pressureDetails":{
         "type":"object",
         "description":"describes a pressure measurement. Properties: value (required, AE) - The pressure expressed as an integer or floating point value of datatype number, unit (required, AE) - the unit of the value to be selected from a controlled list (Pa, hPa, kPa, MPa, GPa, mbar, bar, psi, default value - Pa) of datatype string, qualifier (optional, NAE) - A qualifier to describe the value (e.g., avg, max, min), default value - max) of datatype string, uncertainty (optional, NAE) - Uncertainty in the value defined separately as uncertaintyDetails, which gives the option of choosing between an absolute uncertainty or relative uncertainty and entering the value of uncertainty as a number, notes (optional, NAE) - Further notes about the value of datatype string",
         "additionalProperties":false,
         "properties":{
            "value":{
               "type":"number"
            },
            "unit":{
               "type":"string",
               "default":"Pa",
               "enum":[
                  "Pa",
                  "hPa",
                  "kPa",
                  "MPa",
                  "GPa",
                  "mbar",
                  "bar",
                  "psi"
               ]
            },
            "qualifier":{
               "type":"string",
               "default":"max",
               "enum":[
                 "max",
                 "min",
                 "average"
                 ]
            },
            "uncertainty":{
               "$ref":"#/$defs/uncertaintyDetails"
            },
            "notes":{
               "type":"string"
            }
         },
         "required":[
            "unit",
            "value"
         ],
         "title":"pressureDetails"
      },
      "monochromatorDetails":{
         "type":"object",
         "description":"gives the details about the monochromator if it is used in the measurement. Properties: monochromatorActive (required, AE) - to be set as true if the monochromator is active in the measurement (of the datatype boolean), monoShiftX (required, AE) - Voltage shift applied in the X dimension defined separately as voltageDetails, monoShiftY (required, AE) - Voltage shift applied in the Y dimension defined separately as voltageDetails, monoStigmatorX (required, AE) - strength of monochromator stigmator X applied to correct for astigmatism (of the datatype number), monoStigmatorY (required, AE) - strength of monochromator stigmator Y applied to correct for astigmatism (of the datatype number), monoFocus (required, AE) - the value of the mono Focus used by the monochromator (of the datatype number), selectedSlitNo (optional, AE) - Serial number of the selected slit (of the datatype number), monoPotential (optional, AE) - Voltage applied to the monochromator defined separately as voltageDetails, monoExcitation (optional, AE) - A number which indicats how sensitive is the monochromator (of the datatype number)",
         "additionalProperties":false,
         "properties":{
           "monochromatorActive":{
             "type":"boolean",
             "default":false
           },
           "monoShiftX":{
             "$ref":"#/$defs/voltageDetails"
           },
           "monoShiftY":{
             "$ref":"#/$defs/voltageDetails"
           },
           "monoStigmatorX":{
             "type":"number"
           },
           "monoStigmatorY":{
             "type":"number"
           },
           "monoFocus":{
             "type":"number"
           },
           "selectedSlitNo":{
             "type":"number"
           },
           "monoPotential":{
             "$ref":"#/$defs/voltageDetails"
           },
           "monoExcitation":{
             "type":"number"
           }
         },
         "required":[
           "monochromatorActive",
           "monoShiftX",
           "monoShiftY",
           "monoStigmatorX",
           "monoStigmatorY",
           "monoFocus"
         ],
         "title":"monochromatorDetails"
       },
       "voltageDetails":{
          "type":"object",
          "description":"describes a voltage. Properties: value (required, AE) - The voltage expressed as an integer or floating point value of datatype number, unit (required, AE) - the unit of the value to be selected from a controlled list (µV, mV, V, kV, MV, GV default value - V) of datatype string, qualifier (optional, NAE) - A qualifier to describe the value (e.g., avg, max, min; default value - max) of datatype string, uncertainty (optional, NAE) - Uncertainty in the value defined separately as  uncertaintyDetails, which gives the option of choosing between an absolute uncertainty or relative uncertainty and entering the value of uncertainty as a number, notes (optional, NAE) - Further notes about the value of datatype string",
          "additionalProperties":false,
          "properties":{
             "value":{
                "type":"number"
             },
             "unit":{
                "type":"string",
                "default":"kV",
                "enum":[
                   "µV",
                   "mV",
                   "V",
                   "kV",
                   "MV"
                ]
             },
             "qualifier":{
                "type":"string",
                "default":"max",
                "enum":[
                  "max",
                  "min",
                  "average"
                  ]
             },
             "uncertainty":{
                "$ref":"#/$defs/uncertaintyDetails"
             },
             "notes":{
                "type":"string"
             }
          },
          "required":[
             "unit",
             "value"
          ],
          "title":"voltageDetails"
       },
      "sourceDetails":{
         "type":"object",
         "description":"gives details about the electron beam source. Properties: sourceName (optional, AE) - name of the e-beam source of datatype string, sourceID (optional, NAE) - identifier for the e-beam source, accelerationVoltage (required, AE) - the voltage with which the e-beam is accelerated, defined separately as voltageDetails, (includes the voltage value, optional uncertainty, optional qualifier like max or min, optional note of the type string, and a controlled list of units from which one can be chosen - µV, mv, V, kV, MV), beamCurrent (optional, NAE) - the measured current of the e-beam, defined separately as currentDetails (includes the current value, optional uncertainty, optional qualifier like max or min, optional note of the type string, and a controlled list of units from which one can be chosen - pA, nA, µA, mA, A, kA), currentDensity (optional, NAE) - the current density on the filament, which also indicates the brightness of the gun defined separately as currentDensityDetails with default unit pA/cm2, beamEnergy (optional, NAE) - energy of the e-beam defined separately as energyDetails, sourceLifetime (optional, NAE) - lifetime of the e-beam source (default value - uAh) of datatype string, gunType (optional, NAE) - the type of the electron gun used as source for the e-beam which is to be selected froma  controlled list of values ( normal thermal FEG, extra bright FEG, cold FEG, LaB6, W) of the datatype string, gunLens (optional, AE) - A string which gives the serial number of the lens used in front of the electron gun, extractorVoltage (optional, NAE)- the extractor voltage used for the electorn gun defined separately as voltageDetails",
         "additionalProperties":false,
         "properties":{
            "sourceName":{
               "type":"string"
            },
            "sourceID":{
               "$ref":"#/$defs/identifier"
            },
            "accelerationVoltage":{
               "$ref":"#/$defs/voltageDetails"
            },
            "beamCurrent":{
               "$ref":"#/$defs/currentDetails"
            },
            "currentDensity":{
               "$ref":"#/$defs/currentDensityDetails"
            },
            "beamEnergy":{
               "$ref":"#/$defs/energyDetails"
            },
            "sourceLifetime":{
               "$ref":"#/$defs/lifetimeDetails"
            },
            "gunType":{
               "type":"string",
               "enum":[
                 "normal thermal FEG",
                 "extra bright FEG",
                 "cold FEG",
                 "LaB6",
                 "W"
               ]
            },
            "gunLens":{
              "type":"string"
            },
            "extractor":{
               "$ref":"#/$defs/voltageDetails"
            }
         },
         "required":[
            "accelerationVoltage"
         ],
         "title":"sourceDetails"
      },
      "currentDetails":{
         "type":"object",
         "description":"describes a current. Properties: value (required) - The voltage expressed as an integer or floating point value of datatype number, unit (required) - the unit of the value to be selected from a controlled list (pA, nA, µA, mA, A default value - pA) of datatype string, qualifier (optional, NAE) - A qualifier to describe the value (e.g., avg, max, min; default value - max) of datatype string, uncertainty (optional, NAE) - Uncertainty in the value defined separately as  uncertaintyDetails, which gives the option of choosing between an absolute uncertainty or relative uncertainty and entering the value of uncertainty as a number, notes (optional, NAE) - Further notes about the value of datatype string",
         "additionalProperties":false,
         "properties":{
            "value":{
               "type":"number"
            },
            "unit":{
               "type":"string",
               "default":"pA",
               "enum":[
                  "pA",
                  "nA",
                  "µA",
                  "mA",
                  "A"
               ]
            },
            "qualifier":{
               "type":"string",
               "default":"max",
               "enum":[
                 "max",
                 "min",
                 "average"
                 ]
            },
            "uncertainty":{
               "$ref":"#/$defs/uncertaintyDetails"
            },
            "notes":{
               "type":"string"
            }
         },
         "required":[
            "unit",
            "value"
         ],
         "title":"currentDetails"
      },
      "currentDensityDetails":{
         "type":"object",
         "description":"describes a current density. Properties: value (required) - The current density expressed as an integer or floating point value of datatype number, unit (required) - the unit of the value to be selected from a controlled list (pA/cm2, nA/cm2, nA/nm2, µA/cm2 mA/cm2, A/cm2, A/m2) of datatype string, qualifier (optional, NAE) - A qualifier to describe the value (e.g., avg, max, min; default value - max) of datatype string, uncertainty (optional, NAE) - Uncertainty in the value defined separately as  uncertaintyDetails, which gives the option of choosing between an absolute uncertainty or relative uncertainty and entering the value of uncertainty as a number, notes (optional, NAE) - Further notes about the value of datatype string",
         "additionalProperties":false,
         "properties":{
            "value":{
               "type":"number"
            },
            "unit":{
               "type":"string",
               "default":"pA/cm2",
               "enum":[
                  "pA/cm2",
                  "nA/cm2",
                  "nA/nm2",
                  "µA/cm2",
                  "mA/cm2",
                  "A/cm2",
                  "A/m2"
               ]
            },
            "qualifier":{
               "type":"string",
               "default":"max"
            },
            "uncertainty":{
               "$ref":"#/$defs/uncertaintyDetails"
            },
            "notes":{
               "type":"string"
            }
         },
         "required":[
            "unit",
            "value"
         ],
         "title":"currentDensityDetails"
      },
      "energyDetails":{
         "type":"object",
         "description":"describes an energy. Properties: value (required) - The energy expressed as an integer or floating point value of datatype number, unit (required) - the unit of the value to be selected from a controlled list (meV, eV, keV, MeV, nJ, mJ, J, kJ, MJ; default value - keV) of datatype string, qualifier (optional, NAE) - A qualifier to describe the value (e.g., avg, max, min; default value - max) of datatype string, uncertainty (optional, NAE) - Uncertainty in the value defined separately as uncertaintyDetails giving the option of choosing between an absolute uncertainty or relative uncertainty and entering the value of uncertainty as a number, notes (optional, NAE) - Further notes about the value of datatype string",
         "additionalProperties":false,
         "properties":{
            "value":{
               "type":"number"
            },
            "unit":{
               "type":"string",
               "default":"keV",
               "enum":[
                  "meV",
                  "eV",
                  "keV",
                  "MeV",
                  "nJ",
                  "mJ",
                  "J",
                  "kJ",
                  "MJ"
               ]
            },
            "qualifier":{
               "type":"string",
               "default":"max",
               "enum":[
                 "max",
                 "min",
                 "average"
                 ]
            },
            "uncertainty":{
               "$ref":"#/$defs/uncertaintyDetails"
            },
            "notes":{
               "type":"string"
            }
         },
         "required":[
            "unit",
            "value"
         ],
         "title":"energyDetails"
      },
      "lifetimeDetails":{
         "type":"object",
         "description":"describes a lifetime. Properties: value (required) - The lifetime of the source expressed as an integer or floating point value of datatype number, unit (required) - the unit of the value (default value - µAh) of datatype string, qualifier (optional, NAE) - A qualifier to describe the value (e.g., avg, max, min; default value - max) of datatype string, uncertainty (optional, NAE) - Uncertainty in the value defined separately as  uncertaintyDetails, which gives the option of choosing between an absolute uncertainty or relative uncertainty and entering the value of uncertainty as a number, notes (optional, NAE) - Further notes about the value of datatype string",
         "additionalProperties":false,
         "properties":{
            "value":{
               "type":"number"
            },
            "unit":{
               "type":"string",
               "default":"µAh"
            },
            "qualifier":{
               "type":"string",
               "default":"max",
               "enum":[
                 "max",
                 "min",
                 "average"
                 ]
            },
            "uncertainty":{
               "$ref":"#/$defs/uncertaintyDetails"
            },
            "notes":{
               "type":"string"
            }
         },
         "required":[
            "unit",
            "value"
         ],
         "title":"lifetimeDetails"
      },
      "stageDetails":{
         "type":"object",
         "description":"describes the stage settings during a measurement. Properties: specimenPosition (required, NAE) - Gives the position of the specimen as a set of three coordinates defined separately as coordinateSet, tiltAngleAlpha (required, AE) - angle by which the stage is tilted along the x axis defined separately as angleDetails (with the angle value, optional uncertainty, optional notes, optional qualifier and choice of units between degree and radian), tiltAngleBeta (required, AE) - angle by which the stage is tilted along the y axis defined separately as angleDetails (with the angle value, optional uncertainty, optional notes, optional qualifier and choice of units between degree and radian), rotation (optional, AE) - the angle by which the stage is rotated (along the z axis) defined separately as angleDetails (with the angle value, optional uncertainty, optional notes, optional qualifier and choice of units between degree and radian)",
         "additionalProperties":false,
         "properties":{
            "specimenPosition":{
               "$ref":"#/$defs/coordinateSet"
            },
            "tiltAngleAlpha":{
               "$ref":"#/$defs/angleDetails"
            },
            "tiltAngleBeta":{
               "$ref":"#/$defs/angleDetails"
            },
            "rotation":{
               "$ref":"#/$defs/angleDetails"
            }
         },
         "required":[
            "specimenPosition",
            "tiltAngleAlpha",
            "tiltAngleBeta"
         ],
         "title":"stageDetails"
      },
      "coordinateSet":{
         "type":"object",
         "description":"The set of xyz values describing a point of reference for correlative characterization. Properties: xValue (optional, NAE) - value of the x coordinate of datatype number, xUncertainty (optional, NAE) - uncertainty in the x value defined separately as uncertaintyDetails, yValue (optional, NAE) - value of the y coordinate of datatype number, yUncertainty (optional, NAE) -uncertainty in the y value defined separately as uncertaintyDetails, zValue (optional, NAE) - value of the zcoordinate of datatype number, zUncertainty (optional, NAE) -uncertainty in the z value defined separately as uncertaintyDetails, coordinatesUnit (optional, NAE) - unit of the coordinates (allowed units - nm, um, mm, cm, m)",
         "additionalProperties":false,
         "properties":{
            "xValue":{
               "type":"number"
            },
            "xUncertainty":{
               "$ref":"#/$defs/uncertaintyDetails"
            },
            "yValue":{
               "type":"number"
            },
            "yUncertainty":{
               "$ref":"#/$defs/uncertaintyDetails"
            },
            "zValue":{
               "type":"number"
            },
            "zUncertainty":{
               "$ref":"#/$defs/uncertaintyDetails"
            },
            "coordinatesUnit":{
               "type":"string",
               "default":"um",
               "enum":[
                  "nm",
                  "um",
                  "mm",
                  "cm",
                  "m"
               ]
            }
         },
         "required":[
            "xValue",
            "yValue",
            "zValue",
            "coordinatesUnit"
         ]
      },
      "angleDetails":{
         "type":"object",
         "description":"describes an angle. Properties: value (required) - The angle expressed as an integer or floating point value of datatype number, unit (required) - the unit of the value to be selected from a controlled list (degree, radian; default value - degree) of datatype string, qualifier (optional, NAE) - A qualifier to describe the value (e.g., avg, max, min; default value - max) of datatype string, uncertainty (optional, NAE) - Uncertainty in the value defined separately as uncertaintyDetails, which gives the option of choosing between an absolute uncertainty or relative uncertainty and entering the value of uncertainty as a number, notes (optional, NAE) - Further notes about the value of datatype string",
         "additionalProperties":false,
         "properties":{
            "value":{
               "type":"number"
            },
            "unit":{
               "type":"string",
               "default":"degree",
               "enum":[
                  "degree",
                  "radian"
               ]
            },
            "qualifier":{
               "type":"string",
               "default":"max",
               "enum":[
                 "max",
                 "min",
                 "average"
                 ]
            },
            "uncertainty":{
               "$ref":"#/$defs/uncertaintyDetails"
            },
            "notes":{
               "type":"string"
            }
         },
         "required":[
            "unit",
            "value"
         ],
         "title":"angleDetails"
      },
      "apertureDetails":{
         "type":"object",
         "description":"describes the details of the apertures used during the measurement. Properties: condenser1 (optional, AE) - the size of condenser1 normally expressed in micrometers defined separately as distanceDetails, condenser2 (optional, AE) - the size of condenser2 normally expressed in micrometers defined separately as distanceDetails, condenser3 (optional, AE) - the size of condenser3 normally expressed in micrometers defined separately as distanceDetails, grating (optional, NAE) - details of any additional grating used and its position defined separately as gratingDetails, objectiveAperture (optional, AE) - size of the objective aperture defined separately as distanceDetails normally expressed in micrometers, selectedAreaAperture (optional, AE) - the size of the aperture used for selected area diffraction pattern (SADP) normally expressed in micrometers defined separately as distanceDetails ",
         "additionalProperties":false,
         "properties":{
            "condenser1":{
               "$ref":"#/$defs/distanceDetails"
            },
            "condenser2":{
               "$ref":"#/$defs/distanceDetails"
            },
            "condenser3":{
               "$ref":"#/$defs/distanceDetails"
            },
            "grating":{
               "$ref":"#/$defs/gratingDetails"
            },
            "objectiveAperture":{
               "$ref":"#/$defs/distanceDetails"
            },
            "selectedAreaAperture":{
               "$ref":"#/$defs/distanceDetails"
            }
         },
         "title":"apertureDetails"
      },
      "gratingDetails":{
        "type":"object",
        "description":"details of any additional grating used and its position. Properties: description (optional, NAE) - description of a grating used in addition and its position - objective or condenser  (or biprism in case of holography) for beam shaping or similar use, position (optional, NAE) - the position of the additional grating defined separately as coordinateSet, azimuthAngle (optional, NAE) - the azimuth angle if a biprism is used as an additional gratig normally expressed in degrees defined separately as angleDetails, voltage (optional, NAE) - the voltage applied to the addiitonal grating defined separately as voltageDetails",
        "additionalProperties":false,
        "properties":{
          "description":{
            "type":"string"
          },
          "position":{
            "$ref":"#/$defs/coordinateSet"
          },
          "azimuthAngle":{
            "$ref":"#/$defs/angleDetails"
          },
          "voltage":{
            "$ref":"#/$defs/voltageDetails"
          }
        },
        "title":"gratingDetails"
      },
      "lensDetails":{
        "type":"object",
        "description":"describes of the excitation percentage of the lenses used in the system. Properties: c1 (optional, AE) - percentage of excitation of condenser1 of the datatype number, c2 (optional, AE) - percentage of excitation of condenser2 of the datatype number, c3 (optional, AE) - percentage of excitation of condenser3 of the datatype number, minicondenser (optional, AE) - percentage of excitation of minicondenser of the datatype number, objective (optional, AE) - percentage of excitation of objective lens of the datatype number, lorentz (optional, AE) - percentage of excitation of the lorentz lens of the datatype number, diffraction (optional, AE) - percentage of excitation of diffraction lens of the datatype number, intermediate (optional, AE) - percentage of excitation of intermediate lens of the datatype number, p1 (optional, AE) - percentage of excitation of projector lens 1 of the datatype number, p2 (optional, AE) - percentage of excitation of projector lens 2 of the datatype number, beamConvergence (required, AE) - the angle of the electron beam as it enters the objective lens defined separately as angleDetails with default unit as mrad",
        "additionalProperties":false,
        "properties":{
          "c1":{
            "type":"number"
          },
          "c2":{
            "type":"number"
          },
          "c3":{
            "type":"number"
          },
          "minicondenser":{
            "type":"number"
          },
          "objective":{
            "type":"number"
          },
          "lorentz":{
            "type":"number"
          },
          "diffraction":{
            "type":"number"
          },
          "intermediate":{
            "type":"number"
          },
          "p1":{
            "type":"number"
          },
          "p2":{
            "type":"number"
          },
          "beamConvergence":{
            "$ref":"#/$defs/angleDetails"
          }
        },
        "required":[
          "beamConvergence"
        ],
        "title":"lensDetails"
      },
      "ASTARdetails":{
        "type":"object",
        "description":"details pertaining to an ASTAR attachment used for orientation-phase imaging. Properties: ASTARactive (required, NAE) - set to be true if ASTAR attchment is used of the datatype boolean, ASTARname (optional, AE) - name or nickname of the ASTAR system used of the datatype string, ASTARmanufacturer (optional, AE) - details pertaining to the manufacturer of the ASTAR system defined separately as manufacturerDetails, bufferSize (optional, AE) - size of the buffer in bits expressed as a number-eg. 1024, speedRate (optional, AE) - rate of acquision (fast, medium) of the datatype string, operationMode (optional, AE) - operation Mode of the ASTAR such as normal of the datatype string, systemClockLocked (optional, AE) - to be set to true if system clock is locked of the datatype boolean, objectiveApertureRetracted (optional, NAE) - to be set as true if the objective aperture is retracted for using the ASTAR of the datatype boolean",
        "additionalProperties":false,
        "properties":{
          "ASTARactive":{
            "type":"boolean",
            "default":true
          },
          "ASTARname":{
            "type":"string"
          },
          "ASTARmanufacturer":{
              "$ref":"#/$defs/manufacturerDetails"
          },
          "bufferSize":{
            "type":"number"
          },
          "speedRate":{
            "type":"string",
            "enum":[
              "slow",
              "medium",
              "fast"
            ]
          },
          "operationMode":{
            "type":"string",
            "enum":[
              "normal",
              "other"
            ]
          },
          "systemClockLocked":{
            "type":"boolean",
            "default":true
          },
          "objectiveApertureRetracted":{
            "type":"boolean",
            "default":true
          }
        },
        "required":[
          "ASTARactive"
        ],
        "title":"ASTARdetails"
      },
      "detectorDetails":{
         "type":"object",
         "description":"gives the settings of a detector. Properties: detectorType (required, NAE) - Description of the detector type, e.g., direct electron detector, scintillator, fission chamber, proportion counter, ion chamber, ccd, pixel, image plate, CMOS, He3 gas cylinder, He3 PSD… of the datatype string, detectorID (optional, NAE) - identifier for the detector/camera, detectorName (required, AE) -Name of the detector of datatype string, detectorManufacturer (optional, NAE) - describes the details of the detector (manufacturerName, modelName and detectorID) as part of manufacturerDetails, lastCalibration (optional, NAE) - date and time of last calibration (CCYY-MM-DDThh:mm:ss.sss) of the date-time format, isCorrelationImage (required, NAE) - set to be true if the acquired image is to be correlated with other data for correlative characterization of the datatype boolean, coordinates (optional, NAE) - xyz coordinates describing the position of the detector defined separately as coordinateSet, coordinateReferenceType (optional, NAE) - description on the type of reference point on the sample used for defining the coordinates of the datatype string. For eg.- origin at fixed distances from two edges, origin at centre of the sample, etc., bitDepthReadout (optional, AE) - gives the number of bits read by the electronics per pixel defined to be of the datatype number (can be an integer or floating point number depending on the type of the detector), numberOfPixelsCamera (optional, AE) - gives the number of (CCD) pixels of the camera in the x and y dimensions defined as pixelNumberType, pixelSizeImage (optional, NAE) - gives the distance on the image represented by a single pixel in each of the three dimensions - (x, y, z) defines separately as pixelSize3D,  pixelCalibration (required, NAE) - gives the resolution of the image usually in pixels/nm defined separately as pixelResolutionDetails, pixelOffset (optional, AE) - pixel offset in x and y dimensions defined separately as pixelOffsetDetails, verticallyFlipped (required, AE) - Set to be true if the image is vertically flipped because of the camera setting defined to be of the datatype boolean, horizontallyFlipped (required, AE) - Set to be true if the image is horizontally flipped because of the camera setting defined to be of the datatype boolean, diagonallyFlipped (required, AE) - Set to be true if the image is diagonally flipped because of the camera setting defined to be of the datatype boolean, rotationAngle (optional, AE) - angle by which the image is rotated defined separately as angleDetails, exposureTime (optional, AE) - gives the time for which a camera pixel is exposed defined separately as timeDetails usually with units µs or ms, binning (optional, NAE) - gives the number of detector counts binned together of the datatype number - usually 1, 8 or 16, collectionMethod (required, NAE) - type of collection method- normal, averaging, integration, summation defined to be of the datatype string, numberOfCycles (optional, NAE) - No. of CCD images used for averaging, integration or summation defined to be of the datatype number, darkReferenceCorrection (optional, NAE) - dark field correction data as a 2D array of numbers, STEM (optional, NAE) - Settings pertaining to scanning transmission electron microscopy measurement defined separately as STEMdetails, EELS (optional) - details pertaining to Electron Energy Loss Spectroscopy (EELS) expressed separately as EELSdetails, EDXS (optional) - details pertaining to Energy-Dispersive X-Ray Spectroscopy (EDXS) used expressed separately as EDXSDetails",
         "additionalProperties":false,
         "properties":{
            "detectorType":{
               "type":"string",
               "default":"Secondary Electron"
            },
            "detectorName":{
               "type":"string"
            },
            "detectorID":{
               "$ref":"#/$defs/identifier"
            },
            "detectorManufacturer":{
               "$ref":"#/$defs/manufacturerDetails"
            },
            "lastCalibration":{
               "type":"string",
               "format":"date-time"
            },
            "isCorrelationImage":{
              "type":"boolean",
              "default":false
            },
            "coordinates":{
              "$ref":"#/$defs/coordinateSet"
            },
            "coordinateReferenceType":{
              "type":"string"
            },
            "bitDepthReadout":{
              "type":"number"
            },
            "numberOfPixelsCamera":{
              "$ref":"#/$defs/pixelNumberType"
            },
            "pixelSizeImage":{
              "$ref":"#/$defs/pixelSize3D"
            },
            "pixelCalibration":{
              "$ref":"#/$defs/pixelResolutionDetails"
            },
            "pixelOffset":{
              "$ref":"#/$defs/pixelOffsetDetails"
            },
            "verticallyFlipped":{
              "type":"boolean",
              "default":false
            },
            "horizontallyFlipped":{
              "type":"boolean",
              "default":false
            },
            "diagonallyFlipped":{
              "type":"boolean",
              "default":false
            },
            "rotationAngle":{
              "$ref":"#/$defs/angleDetails"
            },
            "exposureTime":{
              "$ref":"#/$defs/timeDetails"
            },
            "binning":{
              "type":"number",
              "enum":[
                1,
                8,
                16,
                32,
                64,
                128,
                256
              ]
            },
            "collectionMethod":{
              "type":"string",
              "enum":[
                "normal",
                "averaging",
                "integration",
                "summation"
              ]
            },
            "numberOfCycles":{
               "type":"number"
            },
            "darkReferenceCorrection":{
              "type": "array",
              "items": {
                "type": "array",
                "items":{
                  "type":"number"
                }
              }
            }
         },
         "required":[
            "detectorName",
            "detectorType",
            "isCorrelationImage",
            "pixelCalibration",
            "verticallyFlipped",
            "horizontallyFlipped",
            "diagonallyFlipped"
         ],
         "title":"detectorDetails"
      },
      "pixelNumberType":{
         "type":"object",
         "description":"describes the resolution of the image split into number of pixels in x and y directions. Properties: xPixels (required) - no. of pixels in horizontal direction of datatype number, yPixels (required) - no. of pixels in vertical direction of datatype number",
         "additionalProperties":false,
         "properties":{
            "xPixels":{
               "type":"number"
            },
            "yPixels":{
               "type":"number"
            }
         }
      },
      "pixelSize3D":{
         "type":"object",
         "description":"the distance on the sample imaged by a single pixel, normally expressed in nm/pixel, is expressed in 3D for the mapping along x,y and z directions. Properties: xPixelSize (required) -  distance on the sample covered by a pixel in the x direction defined separately as pixelSizeDetails, yPixelSize (optional) - distance on the sample covered by a pixel in the y direction defined separately as pixelSizeDetails; The y-pixel-size is to be given only if it is different from the x-pixel-size, zPixelSize (optional) - distance on the sample covered by a pixel in the z direction defined separately as pixelSizeDetails; The z-pixel-size can be ignored if it is greater than the voxel size.",
         "additionalProperties":false,
         "properties":{
            "xPixelSize":{
               "$ref":"#/$defs/pixelSizeDetails"
            },
            "yPixelSize":{
               "$ref":"#/$defs/pixelSizeDetails"
            },
            "zPixelSize":{
               "$ref":"#/$defs/pixelSizeDetails"
            }
         },
         "required":[
            "xPixelSize"
         ],
         "title":"pixelsize3D"
      },
      "pixelSizeDetails":{
         "type":"object",
         "description":"describes the size of a pixel. Properties: value (required) - The pixel-size expressed as an integer or floating point value of datatype number, unit (required) - the unit of the value (default value - nm/pixel) of datatype string, qualifier (optional) - A qualifier to describe the value (e.g., avg, max, min; default value - max) of datatype string, uncertainty (optional) - Uncertainty in the value defined as a complex type uncertaintyDetails, which gives the option of choosing between an absolute uncertainty or relative uncertainty and entering the value of uncertainty as a number, notes (optional) - Further notes about the value of datatype string",
         "additionalProperties":false,
         "properties":{
            "value":{
               "type":"number"
            },
            "unit":{
               "type":"string",
               "default":"nm/pixel"
            },
            "qualifier":{
               "type":"string",
               "default":"max",
               "enum":[
                 "max",
                 "min",
                 "average"
                 ]
            },
            "uncertainty":{
               "$ref":"#/$defs/uncertaintyDetails"
            },
            "notes":{
               "type":"string"
            }
         },
         "required":[
            "unit",
            "value"
         ],
         "title":"pixelSizeDetails"
      },
      "pixelResolutionDetails":{
         "type":"object",
         "description":"describes the size of a pixel. Properties: value (required) - The pixel-size expressed as an integer or floating point value of datatype number, unit (required) - the unit of the value (default value - nm/pixel) of datatype string, qualifier (optional) - A qualifier to describe the value (e.g., avg, max, min; default value - max) of datatype string, uncertainty (optional) - Uncertainty in the value defined as a complex type uncertaintyDetails, which gives the option of choosing between an absolute uncertainty or relative uncertainty and entering the value of uncertainty as a number, notes (optional) - Further notes about the value of datatype string",
         "additionalProperties":false,
         "properties":{
            "value":{
               "type":"number"
            },
            "unit":{
               "type":"string",
               "default":"pixels/nm"
            },
            "qualifier":{
               "type":"string",
               "default":"max",
               "enum":[
                 "max",
                 "min",
                 "average"
                 ]
            },
            "uncertainty":{
               "$ref":"#/$defs/uncertaintyDetails"
            },
            "notes":{
               "type":"string"
            }
         },
         "required":[
            "unit",
            "value"
         ],
         "title":"pixelSizeDetails"
      },
      "pixelOffsetDetails":{
         "type":"object",
         "description":"describes the offset applied to a pixel in x and y dimensions normally expressed in nm. Properties: xPixelOffset (optional, AE) - the offset applied to a pixel in x dimension, yPixelOffset (optional, AE) - the offset applied to a pixel in y dimension",
         "additionalProperties":false,
         "properties":{
            "xPixelOffset":{
               "$ref":"#/$defs/distanceDetails"
            },
            "yPixelOffset":{
               "$ref":"#/$defs/distanceDetails"
            }
          },
         "title":"pixelSizeDetails"
      },
      "timeDetails":{
         "type":"object",
         "description":"describes a time. Properties: value (required) - The time expressed as an integer or floating point value of datatype number, unit (required) - the unit of the value to be selected from a controlled list (ps, ns, us, ms, s default value - us) of datatype string, qualifier (optional) - A qualifier to describe the value (e.g., avg, max, min; default value - max) of datatype string, uncertainty (optional) - Uncertainty in the value defined as a complex type uncertaintyDetails, which gives the option of choosing between an absolute uncertainty or relative uncertainty and entering the value of uncertainty as a number, notes (optional) - Further notes about the value of datatype string",
         "additionalProperties":false,
         "properties":{
            "value":{
               "type":"number"
            },
            "unit":{
               "type":"string",
               "default":"us",
               "enum":[
                  "ps",
                  "ns",
                  "us",
                  "ms",
                  "s"
               ]
            },
            "qualifier":{
               "type":"string",
               "default":"max",
               "enum":[
                 "max",
                 "min",
                 "average"
                 ]
            },
            "uncertainty":{
               "$ref":"#/$defs/uncertaintyDetails"
            },
            "notes":{
               "type":"string"
            }
         },
         "required":[
            "unit",
            "value"
         ],
         "title":"timeDetails"
      },
      "STEMdetails":{
         "type":"object",
         "description":"gives the settings and parameters pertaining to scanning transmission electron microscopy measurement. Properties: gainCorrection (optional, NAE) - the flat field correction data applied to correct the gain as an array of numbers, darkGainCorrectionType (optional, NAE) - description of the kind of correction used of the datatype string, ADF (optional, NAE) - details about an annular dark field detector (ADF) defined separately as ADFdetails, SCAN (required, NAE) - gives the details about the scanning parameters defined separately as SCANdetails",
         "additionalProperties":false,
         "properties":{
            "gainCorrection":{
               "type":"array",
               "items":{
                 "type":"array",
                 "items":{
                   "type":"number"
                 }
               }
            },
            "darkGainCorrectionType":{
              "type":"string"
            },
            "ADF":{
              "$ref":"#/$defs/ADFdetails"
            },
            "SCAN":{
               "$ref":"#/$defs/SCANdetails"
            }
          },
         "required":[
            "SCAN"
         ],
       "title":"STEMdetails"
     },
     "ADFdetails":{
       "type":"object",
       "description":"details about an annular dark field detector (ADF). Properties: description (optional, NAE) - optional additional description about the ADF detector like if it is segmented or not of the datatype string, enabledHAADF (required, AE) - to be set as true is high angle annular dark field detector is enabled of the datatype boolean, gain (required, AE) - the gain set for the detector defined separately as gainDetails, offset (required, AE) - The offset applied to the detector expressed as an integer of the datatype number, collectionAngleRange (required, AE) - the min and max angles of the annular detector within which the signal is detected defined separately as rangeDetails",
       "additionalProperties":false,
       "properties":{
         "description":{
           "type":"string"
         },
         "enabledHAADF":{
           "type":"boolean",
           "default":false
         },
         "gain":{
           "$ref":"#/$defs/gainDetails"
         },
         "offset":{
           "type":"number"
         },
         "collectionAngleRange":{
           "$ref":"#/$defs/rangeDetails"
         }
       },
       "required":[
         "enabledHAADF",
         "gain",
         "offset",
         "collectionAngleRange"
       ],
       "title":"ADFdetails"
     },
     "gainDetails":{
       "type":"object",
       "description":"describes a gain. Properties: value (required, AE) - The gainexpressed as an integer or floating point value of datatype number, unit (required, AE) - the unit of the value to be selected from a controlled list (dB, % default value - dB) of datatype string, qualifier (optional, NAE) - A qualifier to describe the value (e.g., avg, max, min; default value - max) of datatype string, uncertainty (optional, NAE) - Uncertainty in the value defined as a complex type uncertaintyDetails, which gives the option of choosing between an absolute uncertainty or relative uncertainty and entering the value of uncertainty as a number, notes (optional, NAE) - Further notes about the value of datatype string",
       "additionalProperties":false,
       "properties":{
          "value":{
             "type":"number"
          },
          "unit":{
             "type":"string",
             "default":"us",
             "enum":[
                "dB",
                "%"
             ]
          },
          "qualifier":{
             "type":"string",
             "enum":[
               "max",
               "min",
               "average"
               ]
          },
          "uncertainty":{
             "$ref":"#/$defs/uncertaintyDetails"
          },
          "notes":{
             "type":"string"
          }
       },
       "required":[
          "unit",
          "value"
       ],
       "title":"gainDetails"
     },
     "rangeDetails":{
       "type":"object",
       "description":"describes as range between two values - value1 and value2. Properties: value1 (required, AE) - the lower bound value which is a dimensional quantity defined here separately as angleDetails out of which the qualifier property is to be set as min, value2 (required, AE) - the upper bound value which is a dimensional quantity defined here separately as angleDetails out of which the qualifier property is to be set as max",
       "additionalProperties":false,
       "properties":{
         "value1":{
            "$ref":"#/$defs/angleDetails"
         },
         "value2":{
            "$ref":"#/$defs/angleDetails"
         }
       },
       "required":[
         "value1",
         "value2"
       ],
       "title":"rangeDetails"
     },
     "SCANdetails":{
       "type":"object",
       "description":"describes the scanning parameters. Properties: dwellTime (required, AE) - the time for which a pixel is scanned defined separately as timeDetails, scanType (required, NAE) - choice between type of scan as 0D, 1D or 2D defined to be of the datatype string, scanSize (optional, NAE) - based on if scan is 1D or 2D, the corresponding no. of pixels in x and y directions are to be entered defined separately as pixelNumberType, mainsLock (optional, AE) - to be set as true if the mains lock is engaged of the datatype boolean, frameTime ( optional, AE) - the time taken to acquire a frame defines separately as timeDetails, scanRotation (optional, AE) - the angle with which the scanning system is rotated defined separately as angleDetails, xFieldOfView - the full scan field of view in the x direction normally expressed in nm defined separately as distanceDetails, yFieldOfView - the full scan field of view in the y direction normally expressed in nm defined separately as distanceDetails",
       "additionalProperties":false,
       "properties":{
         "dwellTime":{
           "$ref":"#/$defs/timeDetails"
         },
         "scanType":{
           "type":"string",
           "enum":[
             "0D",
             "1D",
             "2D"
           ]
         },
         "dwellTime":{
           "$ref":"#/$defs/pixelNumberType"
         },
         "mainsLock":{
           "type":"boolean",
           "default":false
         },
         "frameTime":{
           "$ref":"#/$defs/timeDetails"
         },
         "scanRotation":{
           "$ref":"#/$defs/angleDetails"
         },
         "xFieldOfView":{
           "$ref":"#/$defs/distanceDetails"
         },
         "yFieldOfView":{
           "$ref":"#/$defs/distanceDetails"
         }
       },
       "required":[
         "dwellTime",
         "scanType"
       ],
       "title":"SCANdetails"
     },
     "EELSdetails":{
       "type":"object",
       "description":"describes the parameters of Electron Energy Loss spectroscopy (EELS). Properties: continuousMode (optional, AE) - an integer indicating the continuous mode defined to be of the datatype number, dualAcquireEnabled (required, AE) - to be set as true if dual Acquire mode is enabled of the datatype boolean, highQualityDarkReferenceApplied (optional, AE) - to be set as true if a high quality dark reference is applied of the datatype boolean, lowLossDualAcquire (optional, AE) - to be set as true if low loss dual Acquire mode is enabled of the datatype boolean, noOfFrames (optional, AE) - the number of frames acquired during the scan, saturationFraction (optional, AE) - the fraction of saturated electrons in the scanned image defined to be of the datatype number, collectionSemiAngle (required, AE) - gives the number of semi-angles of the scattered beam which is collected usually expressed in mrad defined separately as angleDetails, convergenceSemiAngle (required, AE) - gives the convergence semi-angle of the electron beam usually expressed in mrad defined separately as angleDetails, subPixelAveragingEnabled (optional, AE) - to bet set to true if sub-pixel averaging is enabled defined to be of the datatype boolean, spectrometer (optional, NAE) - details pertaining to the spectrometer used in EELS defined separately as spectrometerDetails",
       "additionalProperties":false,
       "properties":{
         "continuousMode":{
           "type":"number"
         },
         "dualAcquireEnabled":{
           "type":"boolean"
         },
         "highQualityDarkReferenceApplied":{
           "type":"boolean"
         },
         "lowLossDualAcquire":{
           "type":"boolean"
         },
         "noOfFrames":{
           "type":"number"
         },
         "saturationFraction":{
           "type":"number"
         },
         "collectionSemiAngle":{
           "$ref":"#/$defs/angleDetails"
         },
         "convergenceSemiAngle":{
           "$ref":"#/$defs/angleDetails"
         },
         "subPixelAveragingEnabled":{
           "type":"boolean",
           "default":false
         },
         "spectrometer":{
           "$ref":"#/$defs/spectrometerDetails"
         }
       },
       "required":[
         "dualAcquireEnabled",
         "collectionSemiAngle",
         "convergenceSemiAngle"
       ],
       "title":"EELSdetails"
     },
     "spectrometerDetails":{
       "type":"object",
       "description":"gives the details about the spectrometer used for EELS. Properties: apertureSize (required, AE) - the size of the aperture usually in units of mm defined separately as distanceDetails; aperture size may be also called aperture label by some manufacturers, dispersion (required, AE) - gives the energy covered by a channel of the CCD normally expressed in eV defined separately as energyDetails, driftTubeEnabled (optional, AE) - to be set as true if the drift tube is enabled of the datatype boolean, driftTubeVoltage (optional, AE) - drift tube voltage applied to the electrons passing through the sample defined separately as voltageDetails, driftTubeVoltage2 (optional, AE) - drift tube voltage for dual acquire sibling if used defined separately as voltageDetails, energyLoss (optional, AE) - the energy value given to indicate where the majority of the energy Loss is located on the spectrum, defined separately as energyDetails, HTOffsetEnabled (optional, AE) - to be set true if high tension offset is enabled defined to be of the datatype boolean, HTOffset (optional, AE) - the HT offset applied defined separately as voltageDetails, HTOffset2 (optional, AE) - the HT offset applied for dual acquire sibling (if used) defined separately as voltageDetails, spectrometerID (optional, NAE) - identifier for the spectrometer defined to be of the type identifier, spectrometerName (optional, AE) - Name or nick-name of the spectrometer defined as a string, prismOffset (optional, AE) - offset applied to the prism in the spectrometer defined separately as voltageDetails",
       "additionalProperties":false,
       "properties":{
         "apertureSize":{
           "$ref":"#/$defs/distanceDetails"
         },
         "dispersion":{
           "$ref":"#/$defs/energyDetails"
         },
         "driftTubeEnabled":{
           "type":"boolean",
           "default":false
         },
         "driftTubeVoltage":{
           "$ref":"#/$defs/voltageDetails"
         },
         "driftTubeVoltage2":{
           "$ref":"#/$defs/voltageDetails"
         },
         "energyLoss":{
           "$ref":"#/$defs/energyDetails"
         },
         "HTOffsetEnabled":{
           "type":"boolean",
           "default":false
         },
         "HTOffset":{
           "$ref":"#/$defs/voltageDetails"
         },
         "HTOffset2":{
           "$ref":"#/$defs/voltageDetails"
         },
         "spectrometerID":{
           "$ref":"#/$defs/identifier"
         },
         "spectrometerName":{
           "type":"string"
         },
         "prismOffset":{
           "$ref":"#/$defs/voltageDetails"
         }
       },
       "required":[
         "apertureSize",
         "dispersion"
       ],
       "title":"spectrometerDetails"
     },
     "EDXSDetails":{
       "type":"object",
       "description":"details pertaining to Energy Dispersive Xray Spectroscopy (EDXS) system. Properties: detectorName (optional, AE) - name or local name of the EDXS detector of the datatype string, detectorID (optional, NAE) - identifier for the EDXS detector defined separately as identifier, dispersion (required, AE) - gives the energy covered by a channel of the CCD normally expressed in eV defined separately as energyDetails, offset (required, AE) - the offset energy applied to the detector usually expressed in eV defined to be of the type energyDetails, shapingTime (optional, AE) - time used to shape and smooth EDX peaks defined separatelyas timeDetails, noOfFrames (required, AE) - the number of frames acquired by the EDXS detector defined to be of the datatype number, segmentedDetector (optional, NAE) - to be set as true if a segmented detector is used for the EDXS system, noOfUsedSegments (optional, NAE) - the number of segments used in a segmented detector defined to be of the datatype number, usedSegments (optional, AE) - array of properties which describe the characteristics of each segment of the segmented detector; each segment is defined separately as usedSegmentDetails",
       "additionalProperties":false,
       "properties":{
         "detectorName":{
           "type":"string"
         },
         "detectorID":{
           "$ref":"#/$defs/identifier"
         },
         "dispersion":{
           "$ref":"#/$defs/energyDetails"
         },
         "offset":{
           "$ref":"#/$defs/energyDetails"
         },
         "shapingTime":{
           "$ref":"#/$defs/timeDetails"
         },
         "noOfFrames":{
           "type":"number"
         },
         "segmentedDetector":{
           "type":"boolean",
           "default":false
         },
         "noOfUsedSegments":{
           "type":"number"
         },
         "usedSegments":{
           "type":"array",
           "items":{
             "$ref":"#/$defs/usedSegmentDetails"
           }
         }
       },
       "required":[
         "dispersion",
         "offset",
         "noOfFrames"
       ],
       "title":"EDXSDetails"
     },
     "usedSegmentDetails":{
       "type":"object",
       "description":"describes the properties of a segment of the segmented EDXS detector. Properties: segmentNo (optional, AE) - the serial number of the segment defined to be of the datatype number, enabled (optional, AE) - to be set as true if the particular segment is enabled of the datatype boolean, azimuth (optional, AE) - angle at which the segment is located defined separately as angleDetails, inputCountRate (optional, AE) - an integer value indicating the number of counts per second arriving at the segment of the datatype number, outputCountRate (optional, AE) - an integer value indicating the number of counts per second passed by the segment to the electronics (of the datatype number)",
       "additionalProperties":false,
       "properties":{
         "segmentNo":{
           "type":"number"
         },
         "enabled":{
           "type":"boolean",
           "default":false
         },
         "azimuth":{
           "$ref":"#/$defs/angleDetails"
         },
         "inputCountRate":{
           "type":"number"
         },
         "outputCountRate":{
           "type":"number"
         }
       },
       "title":"usedSegmentDetails"
     }
   }
}
